<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing Telit FN990A40</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="/Telit5G/favicon/favicon-48x48.png" sizes="48x48" />
    <link rel="icon" type="image/svg+xml" href="/Telit5G/favicon/favicon.svg" />
    <link rel="shortcut icon" href="/Telit5G/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/Telit5G/favicon/apple-touch-icon.png" />
    <link rel="manifest" href="/Telit5G/favicon/site.webmanifest" />
</head>
<body>
    <h1>Telit FN990A40 5G module as COTS UE</h1>

    <a href="https://techship.com/product/telit-fn990a40-5g-sub6-m2/?variant=005" target="_blank">Purchase link</a>

    <br>
    Script to initiate the connection:
    <pre>
    <span class="comment">#!/bin/bash</span>
    
    <span class="variable">devices</span><span class="operator">=</span><span class="command">$(</span><span class="command">ls</span> <span class="string">/dev/cdc-wdm*</span> <span class="argument">2>/dev/null</span><span class="command">)</span>
    
    <span class="keyword">if</span> <span class="operator">[</span> <span class="operator">-z</span> <span class="string">"$devices"</span> <span class="operator">]</span><span class="operator">;</span> <span class="keyword">then</span>
        <span class="command">echo</span> <span class="string">"No device found"</span>
        <span class="command">exit</span> <span class="argument">1</span>
    <span class="keyword">fi</span>
    
    <span class="variable">device</span><span class="operator">=</span><span class="command">$(</span><span class="command">echo</span> <span class="string">"$devices"</span> <span class="operator">|</span> <span class="command">head</span> <span class="argument">-n 1</span><span class="command">)</span>
    <span class="variable">wwan_interface</span><span class="operator">=</span><span class="string">"wwan0"</span>
    
    <span class="command">sudo</span> <span class="command">qmicli</span> <span class="argument">-d</span> <span class="variable">$device</span> <span class="argument">--dms-set-operating-mode=</span><span class="string">'low-power'</span>
    <span class="command">sleep</span> <span class="argument">1</span>
    <span class="command">sudo</span> <span class="command">qmicli</span> <span class="argument">-d</span> <span class="variable">$device</span> <span class="argument">--dms-set-operating-mode=</span><span class="string">'online'</span>
    <span class="command">sleep</span> <span class="argument">1</span>
    <span class="command">sudo</span> <span class="command">ip</span> <span class="argument">link</span> <span class="argument">set</span> <span class="variable">$wwan_interface</span> <span class="argument">down</span>
    <span class="command">sleep</span> <span class="argument">1</span>
    <span class="command">echo</span> <span class="string">'Y'</span> <span class="operator">|</span> <span class="command">sudo</span> <span class="command">tee</span> <span class="string">/sys/class/net/</span><span class="variable">$wwan_interface</span><span class="string">/qmi/raw_ip</span>
    <span class="command">sleep</span> <span class="argument">2</span>
    <span class="command">sudo</span> <span class="command">ip</span> <span class="argument">link</span> <span class="argument">set</span> <span class="variable">$wwan_interface</span> <span class="argument">up</span>
    <span class="command">sleep</span> <span class="argument">1</span>
    <span class="command">sudo</span> <span class="command">qmicli</span> <span class="argument">-p</span> <span class="argument">-d</span> <span class="variable">$device</span> <span class="argument">--device-open-net=</span><span class="string">'net-raw-ip|net-no-qos-header'</span> <span class="argument">--wds-start-network=</span><span class="string">"apn='internet',ip-type=4"</span> <span class="argument">--client-no-release-cid</span>
    <span class="command">sleep</span> <span class="argument">2</span>
    <span class="command">sudo</span> <span class="command">qmicli</span> <span class="argument">-p</span> <span class="argument">-d</span> <span class="variable">$device</span> <span class="argument">--wds-get-packet-service-status</span>
    <span class="command">sudo</span> <span class="command">qmicli</span> <span class="argument">-p</span> <span class="argument">-d</span> <span class="variable">$device</span> <span class="argument">--wds-get-current-settings</span>
    <span class="command">sleep</span> <span class="argument">2</span>
    <span class="command">sudo</span> <span class="command">udhcpc</span> <span class="argument">-q</span> <span class="argument">-f</span> <span class="argument">-i</span> <span class="variable">$wwan_interface</span></pre>
    
    <br>
    Script to stop the connection:
    <pre>
    <span class="command">sudo</span> <span class="command">qmicli</span> <span class="argument">-d</span> <span class="string">/dev/cdc-wdm1</span> <span class="argument">--dms-set-operating-mode=</span><span class="string">"low-power"</span>
    <span class="command">sudo</span> <span class="command">qmi-network</span> <span class="string">/dev/cdc-wdm1</span> <span class="argument">stop</span></pre>

    <h2>Results:</h2>
    Used <a href="https://github.com/aayamrajshakya/Parser-Plotter/blob/main/parser.py" target="_blank">parser</a> and <a href="https://github.com/aayamrajshakya/Parser-Plotter/blob/main/plotter.py" target="_blank">plotter</a> to process the raw iPerf log files.
    <h3>Stable:</h3>

    <div class="slider" id="stableSlider">
        <button class="prev" onclick="moveSlide(-1, 'stableSlider')">&#10094;</button>
        <div class="slides">
            <div class="slide">
                <figure>
                    <img src="/Telit5G/graph/stable(10).png" alt="10M">
                    <figcaption class="caption">Graph #1: 10M</figcaption>
                </figure>
            </div>
            <div class="slide">
                <figure>
                    <img src="/Telit5G/graph/stable(100).png" alt="100M">
                    <figcaption class="caption">Graph #2: 100M</figcaption>
                </figure>
            </div>
            <div class="slide">
                <figure>
                    <img src="/Telit5G/graph/stable(115).png" alt="115M">
                    <figcaption class="caption">Graph #3: 115M</figcaption>
                </figure>
            </div>
        </div>
        <button class="next" onclick="moveSlide(1, 'stableSlider')">&#10095;</button>
    </div>

    <h3>Mobile:</h3>

    <div class="slider" id="mobileSlider">
        <button class="prev" onclick="moveSlide(-1, 'mobileSlider')">&#10094;</button>
        <div class="slides">
            <div class="slide">
                <figure>
                    <img src="/Telit5G/graph/mobile(5).png" alt="5M">
                    <figcaption class="caption">Graph #1: 5M</figcaption>
                </figure>
            </div>
            <div class="slide">
                <figure>
                    <img src="/Telit5G/graph/mobile(10).png" alt="10M">
                    <figcaption class="caption">Graph #2: 10M</figcaption>
                </figure>
            </div>
            <div class="slide">
                <figure>
                    <img src="/Telit5G/graph/mobile(20).png" alt="20M">
                    <figcaption class="caption">Graph #3: 20M</figcaption>
                </figure>
            </div>
            <div class="slide">
                <figure>
                    <img src="/Telit5G/graph/mobile(50).png" alt="50M">
                    <figcaption class="caption">Graph #4: 50M</figcaption>
                </figure>
            </div>
            <div class="slide">
                <figure>
                    <img src="/Telit5G/graph/mobile(75).png" alt="75M">
                    <figcaption class="caption">Graph #5: 75M</figcaption>
                </figure>
            </div>
            <div class="slide">
                <figure>
                    <img src="/Telit5G/graph/mobile(100).png" alt="100M">
                    <figcaption class="caption">Graph #6: 100M</figcaption>
                </figure>
            </div>
            <div class="slide">
                <figure>
                    <img src="/Telit5G/graph/mobile(115).png" alt="115M">
                    <figcaption class="caption">Graph #7: 115M</figcaption>
                </figure>
            </div>
        </div>
        <button class="next" onclick="moveSlide(1, 'mobileSlider')">&#10095;</button>
    </div>

    <script>
        const sliders = {
            stableSlider: { currentSlide: 0, totalSlides: 3 },
            mobileSlider: { currentSlide: 0, totalSlides: 7 }
        };

        function moveSlide(step, sliderId) {
            const slider = sliders[sliderId];
            const slides = document.querySelector(`#${sliderId} .slides`);
            
            slider.currentSlide = (slider.currentSlide + step + slider.totalSlides) % slider.totalSlides;
            slides.style.transform = `translateX(-${slider.currentSlide * 100}%)`;
        }
    </script>
    <script>
    document.addEventListener('contextmenu', event => event.preventDefault());
    </script>
    <footer>
    <p>&copy; 2024 Aayam Raj Shakya.</p>
</footer>
</body>
</html>
